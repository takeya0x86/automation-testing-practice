!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=17)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(1);function r(e,...t){let n=Object(a.g)();const r=e.split(".");let o;for(const e of r){if(o=n[e],"string"==typeof o)break;n=n[e]}for(const e of t)o=o.replace("{}",e);return o}},function(e,t,n){"use strict";n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return m})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return g})),n.d(t,"a",(function(){return b}));const a={ja:n(6),"en-US":n(7)},r={ja:n(8),"en-US":n(9)},o={ja:new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",currencyDisplay:"name"}),"en-US":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",currencyDisplay:"symbol"})},i={ja:new Intl.DateTimeFormat("ja-JP",{year:"numeric",month:"long",day:"numeric"}),"en-US":new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"})},l={ja:new Intl.DateTimeFormat("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"}),"en-US":new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})},s={ja:e=>{const t=e.match(/^(\d{4})\/(\d{1,2})\/(\d{1,2})$/);if(!t||4!==t.length)return null;const n=parseInt(t[1],10),a=parseInt(t[2],10),r=parseInt(t[3],10);return new Date(n,a-1,r)},"en-US":e=>{const t=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(!t||4!==t.length)return null;const n=parseInt(t[3],10),a=parseInt(t[1],10),r=parseInt(t[2],10);return new Date(n,a-1,r)}},c={ja:1e3,"en-US":10};function d(){return document.getElementsByTagName("html")[0].lang}function u(e=d()){return a[e]}function m(e=d()){return r[e]}function f(e=d()){return o[e]}function p(e=d()){return i[e]}function h(e=d()){return l[e]}function g(e=d()){return s[e]}function b(e=d()){return c[e]}},function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"j",(function(){return m})),n.d(t,"a",(function(){return f}));var a=n(1);function r(e){let t=Object(a.h)().find(t=>t.email===e);return t?(t.preset=!0,t):(t=localStorage.getItem(e),t?JSON.parse(t):null)}function o(e,t){const n=r(e);return n&&n.password===t}function i(){return document.cookie.replace(/(?:(?:^|.*;\s*)session\s*\=\s*([^;]*).*$)|^.*$/,"$1")}function l(e){document.cookie="session="+e+"; max-age=630720000"}function s(){document.cookie="session=; max-age=0"}function c(){return""+(Math.floor(9e9*Math.random())+1e9)}function d(){return document.cookie.replace(/(?:(?:^|.*;\s*)transaction\s*\=\s*([^;]*).*$)|^.*$/,"$1")}function u(){document.cookie="transaction=; max-age=0"}function m(){document.getElementById("signup-holder").classList.replace("d-block","d-none"),document.getElementById("login-holder").classList.replace("d-block","d-none"),document.getElementById("mypage-holder").classList.replace("d-none","d-block"),document.getElementById("logout-holder").classList.replace("d-none","d-block"),document.getElementById("logout-form").addEventListener("submit",()=>{s()})}function f(e,t){return!e.only||!!t&&("member"===e.only||("premium"===e.only?"premium"===t.rank:void 0))}},function(e,t,n){"use strict";function a(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}function r(){let e;e=2===location.pathname.split("/").length?location.pathname.replace(/(\/.+\.html)/,"/index.html"):location.pathname.replace(/(\/.+)(\/.+\.html)/,"$1/index.html"),location.assign(location.origin+e)}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"f",(function(){return d}));var a=n(1);function r(e){return Object(a.b)().format(e)}function o(e){return Object(a.c)().format(e)}function i(e){return Object(a.d)().format(e)}function l(e){return Object(a.e)()(e)}function s(e){return e<10?"0"+e:""+e}function c(e){return e.getFullYear()+"-"+s(e.getMonth()+1)+"-"+s(e.getDate())}function d(e){const t=e.match(/^(\d{4})-(\d{1,2})-(\d{1,2})$/);if(!t||4!==t.length)return null;const n=parseInt(t[1],10),a=parseInt(t[2],10),r=parseInt(t[3],10);return new Date(n,a-1,r)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i}));var a=n(0);function r(...e){e.forEach(e=>e.setCustomValidity(""))}function o(e){if(!e)return Object(a.a)("validation.badInput");{const t=new Date,n=new Date;if(n.setDate(n.getDate()+90),e.getTime()<t.getTime())return Object(a.a)("validation.shoudBeNextDay");if(e.getTime()>n.getTime())return Object(a.a)("validation.shouldBeThreeMonth")}}function i(...e){e.forEach(e=>{document.querySelector("#"+e.id+" ~ .invalid-feedback").textContent=function(e){return e.validity.customError?e.validationMessage:e.validity.valueMissing?Object(a.a)("validation.valueMissing"):e.validity.typeMismatch?"email"===e.type?Object(a.a)("validation.typeMismatch.email"):"url"===e.type?Object(a.a)("validation.typeMismatch.url"):Object(a.a)("validation.badInput"):e.validity.badInput?Object(a.a)("validation.badInput"):e.validity.patternMismatch?Object(a.a)("validation.patternMismatch"):e.validity.tooLong?Object(a.a)("validation.tooLong",e.maxLength):e.validity.tooShort?Object(a.a)("validation.tooShort",e.minLength):e.validity.rangeOverflow?Object(a.a)("validation.rangeOverflow",e.max):e.validity.rangeUnderflow?Object(a.a)("validation.rangeUnderflow",e.min):e.validity.stepMismatch?Object(a.a)("validation.badInput"):void 0}(e)})}},function(e){e.exports=JSON.parse('{"validation":{"valueMissing":"このフィールドを入力してください。","typeMismatch":{"email":"メールアドレスを入力してください。","url":"URLを入力してください。"},"badInput":"有効な値を入力してください。","patternMismatch":"指定されている形式で入力してください。","tooLong":"{}文字以内で入力してください。","tooShort":"{}文字以上で入力してください。","rangeOverflow":"{}以下の値を入力してください。","rangeUnderflow":"{}以上の値を入力してください。","stepMismatch":"有効な値を入力してください。","shoudBeNextDay":"翌日以降の日付を入力してください。","shouldBeThreeMonth":"3ヶ月以内の日付を入力してください。","mailOrAddressMismatch":"メールアドレスまたはパスワードが違います。","existsMail":"このメールアドレスはすでに登録済みです。","passwordUnmatch":"入力されたパスワードと一致しません。","underTenKb":"ファイルサイズは10KB以下にしてください。","onlyImageFile":"画像ファイルを選択してください。"},"user":{"gender":{"unregistered":"未登録","male":"男性","female":"女性","other":"その他"},"rank":{"premium":"プレミアム会員","normal":"一般会員"},"unregistered":"未登録","notification":{"true":"受け取る","false":"受け取らない"},"deleteConfirm":"退会すると全ての情報が削除されます。\\nよろしいですか？","deleteComplete":"退会処理を完了しました。ご利用ありがとうございました。"},"plans":{"premiumOnly":"❤️プレミアム会員限定❤️","memberOnly":"会員限定","oneAdult":"大人1名{}","minHeadCount":"{}名様から","reserveLink":"このプランで予約"},"reserve":{"planDescLong":"お一人様1泊{}〜、土日は25%アップ。{}名様〜{}名様、最長{}泊","planDescShort":"お一人様1泊{}〜、土日は25%アップ","roomInfo":"部屋情報","totalBill":"合計 {}（税込み）","term":"{} 〜 {} {}泊","headCount":"{}名様","breakfast":"朝食バイキング","earlyCheckIn":"昼からチェックインプラン","sightseeing":"お得な観光プラン","none":"なし","username":"{}様","contact":{"no":"希望しない","email":"メール：{}","tel":"電話：{}"}}}')},function(e){e.exports=JSON.parse('{"validation":{"valueMissing":"Please fill out this field.","typeMismatch":{"email":"Please enter a non-empty email address.","url":"Please enter a non-empty URL."},"badInput":"Please enter a valid value.","patternMismatch":"Please match the requested format.","tooLong":"Please shorten this text to {} characters or less","tooShort":"Please lengthen this text to {} characters or more","rangeOverflow":"Value must be less than or equal to {}.","rangeUnderflow":"Value must be greater than or equal to {}.","stepMismatch":"Please enter a valid value.","shoudBeNextDay":"Please enter a date after tomorrow.","shouldBeThreeMonth":"Please enter a date within 3 months.","mailOrAddressMismatch":"Email or password is invalid.","existsMail":"Email has already been taken.","passwordUnmatch":"Password doesn\'t match.","underTenKb":"Please select a file with a size of 10 KB or less.","onlyImageFile":"Please select an image file."},"user":{"gender":{"unregistered":"not answered","male":"male","female":"female","other":"other"},"rank":{"premium":"Premium","normal":"Normal"},"unregistered":"not answered","notification":{"true":"received","false":"not received"},"deleteConfirm":"If you cancel your membership, all information will be deleted.\\nDo you wish to proceed?","deleteComplete":"The process has been completed. Thank you for your service."},"plans":{"premiumOnly":"❤️Premium members ONLY❤️","memberOnly":"members ONLY","oneAdult":"{} per guest","minHeadCount":"at least {} person(s)","reserveLink":"Reserve room"},"reserve":{"planDescLong":"{} per night. If contains Sun or Sat, plus 25%. {} - {} persons. Max {} nights","planDescShort":"{} per night. If contains Sun or Sat, plus 25%.","roomInfo":"Room info","totalBill":"Total {} (included taxes)","term":"{} - {}. {} night(s)","headCount":"{} person(s)","breakfast":"Breakfast","earlyCheckIn":"Early check-in","sightseeing":"Sightseeing","none":"none","username":"{}","contact":{"no":"not required","email":"Email: {}","tel":"Tel: {}"}}}')},function(e){e.exports=JSON.parse('[{"email":"ichiro@example.com","password":"password","username":"山田一郎","rank":"premium","address":"東京都豊島区池袋","tel":"01234567891","gender":"1","birthday":"","notification":true},{"email":"sakura@example.com","password":"pass1234","username":"松本さくら","rank":"normal","address":"神奈川県横浜市鶴見区大黒ふ頭","tel":"","gender":"2","birthday":"2000-04-01","notification":false},{"email":"jun@example.com","password":"pa55w0rd!","username":"林潤","rank":"premium","address":"大阪府大阪市北区梅田","tel":"01212341234","gender":"9","birthday":"1988-12-17","notification":false},{"email":"yoshiki@example.com","password":"pass-pass","username":"木村良樹","rank":"normal","address":"","tel":"01298765432","gender":"0","birthday":"1992-08-31","notification":true}]')},function(e){e.exports=JSON.parse('[{"email":"clark@example.com","password":"password","username":"Clark Evans","rank":"premium","address":"Mountain View, California","tel":"01234567891","gender":"1","birthday":"","notification":true},{"email":"diana@example.com","password":"pass1234","username":"Diana Johansson","rank":"normal","address":"Redmond, Washington","tel":"","gender":"2","birthday":"2000-04-01","notification":false},{"email":"ororo@example.com","password":"pa55w0rd!","username":"Ororo Saldana","rank":"premium","address":"Cupertino, California","tel":"01212341234","gender":"9","birthday":"1988-12-17","notification":false},{"email":"miles@example.com","password":"pass-pass","username":"Miles Boseman","rank":"normal","address":"","tel":"01298765432","gender":"0","birthday":"1992-08-31","notification":true}]')},function(e,t,n){"use strict";function a(e,t,n,a,r,o,i,l){let s=e*a*n;for(let r=0;r<n;r++){const n=new Date(t.getFullYear(),t.getMonth(),t.getDate());n.setDate(n.getDate()+r),0!==n.getDay()&&6!==n.getDay()||(s+=.25*e*a)}return r&&(s+=l*a*n),o&&(s+=l*a),i&&(s+=l*a),s}n.d(t,"a",(function(){return a}))},,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(4),o=n(1),i=n(2),l=n(5),s=n(10),c=n(0);Object(a.a)(()=>{const e=Object(i.d)(),t=Object(i.f)(e),n=document.getElementById("reserve-form"),d=document.getElementById("plan-id-hidden"),u=document.getElementById("plan-name-hidden"),m=document.getElementById("room-bill-hidden"),f=document.getElementById("date"),p=document.getElementById("term"),h=document.getElementById("head-count"),g=document.getElementById("breakfast"),b=document.getElementById("early-check-in"),y=document.getElementById("sightseeing"),v=document.getElementById("username"),O=document.getElementById("contact"),j=document.getElementById("email"),I=document.getElementById("tel"),k=document.getElementById("comment"),w=document.getElementById("total-bill"),E=new URLSearchParams(location.search),x=parseInt(E.get("plan-id"),10);isNaN(x)&&Object(a.b)();const B=location.origin+"/data/"+Object(o.f)()+"/plan_data.json";fetch(B,{cache:"no-store"}).then(e=>e.json()).then(e=>{const n=e.find(e=>e.id===x);if(!n||!Object(i.a)(n,t))return Promise.reject(new Error);document.getElementById("plan-name").textContent=n.name,document.getElementById("plan-desc").textContent=Object(c.a)("reserve.planDescLong",Object(r.a)(n.roomBill),n.minHeadCount,n.maxHeadCount,n.maxTerm),d.value=n.id,u.value=n.name,m.value=n.roomBill,p.min=n.minTerm,p.max=n.maxTerm,p.value=n.minTerm,h.min=n.minHeadCount,h.max=n.maxHeadCount,h.value=n.minHeadCount;const a=new Date;a.setDate(a.getDate()+1),f.value=Object(r.d)(a);const l=Object(s.a)(n.roomBill,a,n.minTerm,n.minHeadCount,!1,!1,!1,Object(o.a)());if(w.textContent=Object(r.a)(l),n.roomPage){const e=document.getElementById("room-info");e.classList.add("embed-responsive","embed-responsive-1by1"),e.innerHTML='<iframe class="embed-responsive-item" src="./rooms/'+n.roomPage+'" title="'+Object(c.a)("reserve.roomInfo")+'" name="room"></iframe>'}}).catch(()=>{Object(a.b)()}),t&&(v.value=t.username,j.value=t.email,I.value=t.tel);const S=function(){const e=Object(r.e)(f.value);if(!e)return;const t=parseInt(m.value,10),n=parseInt(p.value,10),a=parseInt(h.value,10),i=Object(s.a)(t,e,n,a,g.checked,b.checked,y.checked,Object(o.a)());w.textContent=Object(r.a)(i)};$("#date").datepicker({showButtonPanel:!0,maxDate:90,minDate:1,onSelect:function(){S()}}),O.addEventListener("change",e=>{"no"===e.target.value?(j.disabled=!0,j.required=!1,j.parentElement.classList.replace("d-block","d-none"),I.disabled=!0,I.required=!1,I.parentElement.classList.replace("d-block","d-none")):"email"===e.target.value?(j.disabled=!1,j.required=!0,j.parentElement.classList.replace("d-none","d-block"),I.disabled=!0,I.required=!1,I.parentElement.classList.replace("d-block","d-none")):"tel"===e.target.value&&(j.disabled=!0,j.required=!1,j.parentElement.classList.replace("d-block","d-none"),I.disabled=!1,I.required=!0,I.parentElement.classList.replace("d-none","d-block"))}),[f,p,h,g,b,y].forEach(e=>{e.addEventListener("change",e=>{if(Object(l.a)(e.target),"date"===e.target.id&&f.checkValidity()){const e=Object(l.c)(Object(r.e)(f.value));e&&f.setCustomValidity(e)}f.checkValidity()&&p.checkValidity()&&h.checkValidity()?(f.parentElement.classList.remove("was-validated"),p.parentElement.classList.remove("was-validated"),h.parentElement.classList.remove("was-validated"),S()):(w.textContent="-",Object(l.b)(f,p,h),e.target.parentElement.classList.add("was-validated"))})}),n.addEventListener("submit",e=>{Object(l.a)(f,p,h,v,j,I);const t=Object(r.e)(f.value);if(f.checkValidity()){const e=Object(l.c)(t);e&&f.setCustomValidity(e)}if(n.checkValidity()){const e={roomBill:parseInt(m.value,10),planName:u.value,date:Object(r.b)(t),term:parseInt(p.value,10),headCount:parseInt(h.value,10),breakfast:g.checked,earlyCheckIn:b.checked,sightseeing:y.checked,username:v.value,contact:O.options[O.selectedIndex].value,email:j.value,tel:I.value,comment:k.value},n=Object(i.c)();sessionStorage.setItem(n,JSON.stringify(e)),document.cookie="transaction="+n}else e.preventDefault(),e.stopPropagation(),Object(l.b)(f,p,h,v,j,I),n.classList.add("was-validated")})})}]);
//# sourceMappingURL=reserve.bundle.js.map